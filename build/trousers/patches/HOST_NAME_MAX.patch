This is based on a patch taken from Dilos.

# Copyright (c) 2012-2013, Igor Kozhukhov <ikozhukhov@gmail.com>.
# All rights reserved.

diff -ru trousers-0.3.14~/src/tspi/tsp_tcsi_param.c trousers-0.3.14/src/tspi/tsp_tcsi_param.c
--- trousers-0.3.14~/src/tspi/tsp_tcsi_param.c	2016-11-09 22:31:53.000000000 +0000
+++ trousers-0.3.14/src/tspi/tsp_tcsi_param.c	2017-09-18 09:02:37.908968448 +0000
@@ -15,6 +15,9 @@
 
 #ifndef __APPLE__
 #include <limits.h>
+#ifndef HOST_NAME_MAX
+#define HOST_NAME_MAX _POSIX_HOST_NAME_MAX
+#endif
 #else
 #define HOST_NAME_MAX 64
 #endif
