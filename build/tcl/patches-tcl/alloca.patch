diff -wpruN --no-dereference '--exclude=*.orig' a~/pkgs/sqlite3.47.2/compat/sqlite3/sqlite3.c a/pkgs/sqlite3.47.2/compat/sqlite3/sqlite3.c
--- a~/pkgs/sqlite3.47.2/compat/sqlite3/sqlite3.c	1970-01-01 00:00:00
+++ a/pkgs/sqlite3.47.2/compat/sqlite3/sqlite3.c	1970-01-01 00:00:00
@@ -26,6 +26,11 @@
 # define SQLITE_PRIVATE static
 #endif
 #define SQLITE_UDL_CAPABLE_PARSER 1
+
+#ifdef __illumos__
+#include <alloca.h>
+#endif
+
 /************** Begin file sqliteInt.h ***************************************/
 /*
 ** 2001 September 15
diff -wpruN --no-dereference '--exclude=*.orig' a~/pkgs/sqlite3.47.2/generic/tclsqlite3.c a/pkgs/sqlite3.47.2/generic/tclsqlite3.c
--- a~/pkgs/sqlite3.47.2/generic/tclsqlite3.c	1970-01-01 00:00:00
+++ a/pkgs/sqlite3.47.2/generic/tclsqlite3.c	1970-01-01 00:00:00
@@ -60,6 +60,10 @@
 #include <errno.h>
 #include "sqlite3Uuid.h"
 
+#ifdef __illumos__
+#include <alloca.h>
+#endif
+
 /*
 ** Some additional include files are needed if this file is not
 ** appended to the amalgamation.
